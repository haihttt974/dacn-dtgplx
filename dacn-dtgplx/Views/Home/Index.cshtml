@using Microsoft.EntityFrameworkCore
@model dacn_dtgplx.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Driving School - Home";
}
@inject dacn_dtgplx.Models.DtGplxContext DbContext

@{
    // Lấy role của user đăng nhập
    int? roleId = null;
    if (User.Identity?.IsAuthenticated ?? false)
    {
        var userIdClaim = User.FindFirst(System.Security.Claims.ClaimTypes.NameIdentifier)?.Value;
        if (int.TryParse(userIdClaim, out int userId))
        {
            var user = await DbContext.Users
                .AsNoTracking()
                .FirstOrDefaultAsync(u => u.UserId == userId);
            roleId = user?.RoleId;
        }
    }

    var currentDate = DateOnly.FromDateTime(DateTime.Today);
    var registrationDeadline = DateTime.Today.AddDays(15);
    // Lấy tất cả khóa học có kèm hạng
    var courses = await DbContext.KhoaHocs
        .Include(c => c.IdHangNavigation)
        .AsNoTracking()
        .ToListAsync();
    var coursesByHang = courses
        .GroupBy(c => c.IdHang)
        .Select(g =>
        {
            // Ưu tiên khóa đang mở
            var active = g
                .Where(c => c.IsActive == true)
                .OrderBy(c => c.NgayBatDau)
                .FirstOrDefault();

            if (active != null)
                return active;

            // Nếu không có khóa đang mở → lấy khóa gần nhất (ngày bắt đầu mới nhất)
            return g.OrderByDescending(c => c.NgayBatDau).First();
        })
        .OrderBy(c => c.IdHang)
        .ToList();
    var groups = coursesByHang.Chunk(4).ToList();

    var slideIndex = 0;
    var hangImages = new Dictionary<string, string>
    {
        { "A1", "https://thanhnien.mediacdn.vn/uploaded/bahung/z-ba-hung-2021/thang-7-2021/xe-may-so/xe-may-so_thanhnien-5_NCUT.jpg?width=500" },
        { "A", "https://media-cdn-v2.laodong.vn/Storage/NewsPortal/2019/12/15/772461/Ktm-Rc390-01.jpg" },
        { "B1", "https://tse1.mm.bing.net/th/id/OIP.mzJ5oBYqTf7Z7fxulUjyKAHaE8?pid=Api&P=0&w=300&h=300" },
        { "B", "https://toyotahcm.vn/wp-content/uploads/2024/07/xe-hyundai-7-cho-4.jpg" },
        { "C1", "https://hyundaibacviet.vn/wp-content/uploads/2023/01/Xe-Tai-Hyundai-7-Tan-1.jpg" },
        { "C", "https://vimid.vn/uploads/tin-tuc-tong-hop/xe-tai-hang-nang-la-gi.jpg" },
        { "D2", "https://hyundaimiennam.com/wp-content/uploads/2023/12/Xe-Khach-Hyundai-County-29-cho-7.jpg" },
        { "D1", "https://fordtayninhauto.com/wp-content/uploads/2023/03/gia-ford-transit-16-cho-mau-bac.jpg" },
        { "D", "https://hyundaimiennam.com/wp-content/uploads/2023/12/Xe-Khach-Hyundai-Universe-45-cho-4.jpg" },
        { "BE", "https://u-truck.vn/uploads/tin-tuc/kien-thuc-ve-xe/xe-keo-ro-mooc.jpg" },
        { "C1E", "https://u-truck.vn/uploads/tin-tuc/kien-thuc-ve-xe/xe-keo-ro-mooc.jpg" },
        { "CE", "https://admin.tanthanhcontainer.com/storage/media/zziYW71EQCzMTUXrlT3hWo5oBSIfg8mfoCJZN4uc.jpg" },
        { "D1E", "https://u-truck.vn/uploads/tin-tuc/o-to-keo-ro-mooc.jpg" },
        { "D2E", "https://u-truck.vn/uploads/tin-tuc/o-to-keo-ro-mooc.jpg" },
        { "DE", "https://u-truck.vn/uploads/tin-tuc/xe-keo-so-mi-ro-mooc-la-gi.jpg" }
    };
}
<!-- ========================== -->
<!-- HERO / SLIDER -->
<!-- ========================== -->
<section class="hero-section text-white position-relative">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
        <div class="carousel-inner">

            <!-- Slide 1 -->
            <div class="carousel-item active">
                <div class="hero-bg" style="background-image: url('@Url.Content("~/images/slides/s1.jpg")');"></div>
                <div class="hero-overlay-content position-absolute top-50 start-50 translate-middle text-center text-white w-100 px-3">
                    <h1 class="display-3 fw-bold mb-4">Lái Xe An Toàn, Tự Tin Chinh Phục Mọi Hành Trình</h1>
                    <p class="lead mb-4">Tham gia khóa học của chúng tôi để nắm vững kỹ năng lái xe và nhận bằng nhanh chóng!</p>
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                        <a href="/KhoaHocs" class="btn btn-learn-more btn-lg">Khám Phá Khóa Học</a>
                        <a href="/Account/Register" class="btn btn-our-courses btn-lg">Đăng Ký Ngay</a>
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
            <div class="carousel-item">
                <div class="hero-bg" style="background-image: url('@Url.Content("~/images/slides/s2.jpg")');"></div>
                <div class="hero-overlay-content position-absolute top-50 start-50 translate-middle text-center text-white w-100 px-3">
                    <h1 class="display-3 fw-bold mb-4">Giảng Viên Giàu Kinh Nghiệm & Tận Tâm</h1>
                    <p class="lead mb-4">Được hướng dẫn trực tiếp bởi các chuyên gia sát hạch, hiểu rõ đề thi thực tế.</p>
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                        <a href="/GiaoViens" class="btn btn-learn-more btn-lg">Gặp Gỡ Giảng Viên</a>
                        <a href="/Account/Register" class="btn btn-our-courses btn-lg">Bắt Đầu Hành Trình</a>
                    </div>
                </div>
            </div>

            <!-- Slide 3 -->
            <div class="carousel-item">
                <div class="hero-bg" style="background-image: url('@Url.Content("~/images/slides/s3.jpg")');"></div>
                <div class="hero-overlay-content position-absolute top-50 start-50 translate-middle text-center text-white w-100 px-3">
                    <h1 class="display-3 fw-bold mb-4">Mô Phỏng & Thi Thử Sát Đề Chính Thức</h1>
                    <p class="lead mb-4">Làm quen tình huống thực tế, giảm tối đa áp lực khi bước vào phòng thi.</p>
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                        <a href="/BoDeThiThu" class="btn btn-learn-more btn-lg">Làm Thi Thử</a>
                        <a href="/Account/Register" class="btn btn-our-courses btn-lg">Đăng Ký Học</a>
                    </div>
                </div>
            </div>

            <!-- Slide 4 -->
            <div class="carousel-item">
                <div class="hero-bg" style="background-image: url('@Url.Content("~/images/slides/s4.jpg")');"></div>
                <div class="hero-overlay-content position-absolute top-50 start-50 translate-middle text-center text-white w-100 px-3">
                    <h1 class="display-3 fw-bold mb-4">Lịch Học Linh Hoạt, Phù Hợp Mọi Đối Tượng</h1>
                    <p class="lead mb-4">Nhiều ca sáng–chiều–tối, hỗ trợ chọn lịch theo công việc của bạn.</p>
                    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                        <a href="/LichHocs" class="btn btn-learn-more btn-lg">Xem Lịch Học</a>
                        <a href="/Account/Register" class="btn btn-our-courses btn-lg">Nhận Tư Vấn</a>
                    </div>
                </div>
            </div>

        </div>

        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<!-- ========================== -->
<!-- LỢI ÍCH / TẠI SAO CHỌN CHÚNG TÔI -->
<!-- ========================== -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold display-6">Tại Sao Nên Học Tại Driving School?</h2>
            <p class="text-muted lead">Chúng tôi tập trung vào chất lượng đào tạo, sự an toàn và trải nghiệm của học viên.</p>
        </div>
        <div class="row g-4 text-center">
            <div class="col-md-3">
                <i class="fas fa-user-shield fa-3x text-primary mb-3"></i>
                <h5 class="fw-bold">An Toàn Là Trên Hết</h5>
                <p class="text-muted">Giáo trình chú trọng kỹ năng phòng vệ, xử lý tình huống nguy hiểm và ý thức giao thông.</p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-chalkboard-teacher fa-3x text-success mb-3"></i>
                <h5 class="fw-bold">Giảng Viên 1 Kèm 1</h5>
                <p class="text-muted">Thực hành cùng giảng viên giàu kinh nghiệm, chỉnh sửa từng thói quen nhỏ khi lái.</p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-clock fa-3x text-warning mb-3"></i>
                <h5 class="fw-bold">Lịch Học Linh Hoạt</h5>
                <p class="text-muted">Nhiều khung giờ: sáng, chiều, tối – phù hợp người đi làm, sinh viên.</p>
            </div>
            <div class="col-md-3">
                <i class="fas fa-check-circle fa-3x text-danger mb-3"></i>
                <h5 class="fw-bold">Tỷ Lệ Đậu Cao</h5>
                <p class="text-muted">Lộ trình ôn thi khoa học, thi thử thường xuyên giúp bạn tự tin bước vào kỳ thi.</p>
            </div>
        </div>
    </div>
</section>

<!-- ========================== -->
<!-- KHÓA HỌC -->
<!-- ========================== -->
<section class="courses-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold display-5">Khóa Học Lái Xe</h2>
            <p class="text-muted lead">Tìm khóa học phù hợp để nâng cao kỹ năng lái xe của bạn.</p>
        </div>

        @if (Model.Courses != null && Model.Courses.Any())
        {
            <div id="courseCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">

                    @foreach (var group in groups)
                    {
                        <div class="carousel-item @(slideIndex == 0 ? "active" : "")">
                            <div class="row g-4 justify-content-center">

                                @foreach (var course in group)
                                {
                                    var soLuongToiDa = course.SlToiDa ?? 0;
                                    var daDangKy = course.DangKyHocs?.Count(d => d.TrangThai == true) ?? 0;
                                    var soLuongConLai = soLuongToiDa - daDangKy;

                                    // Lấy mã hạng
                                    string maHang = course.IdHangNavigation?.MaHang?.Trim().ToUpper() ?? "";

                                    // Lấy hình theo hạng
                                    string imgSrc = hangImages.ContainsKey(maHang)
                                    ? hangImages[maHang]
                                    : "/images/courses/default-course.jpg";

                                    // Lấy học phí theo hạng
                                    decimal? hocPhi = course.IdHangNavigation?.ChiPhi;

                                    <div class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex">
                                        <div class="card course-card-big shadow-sm border-0 flex-fill">
                                            <div class="card-body p-4">

                                                <!-- Ảnh khoá học -->
                                                <img src="@imgSrc"
                                                     class="img-fluid rounded mb-3 course-thumbnail"
                                                     onerror="this.src='/images/courses/default-course.jpg'" />

                                                <!-- Tên khoá -->
                                                <h4 class="fw-bold mb-2">@course.TenKhoaHoc</h4>

                                                <!-- Mô tả -->
                                                <p class="text-muted small mb-3">
                                                    @(string.IsNullOrWhiteSpace(course.MoTa)
                                                                                            ? "Khóa học lái xe chất lượng cao giúp bạn tự tin và an toàn hơn."
                                                                                            : (course.MoTa.Length > 160 ? course.MoTa.Substring(0, 160) + "..." : course.MoTa))
                                    </p>

                                                <!-- Ngày bắt đầu -->
                                                <div class="mb-2">
                                                    <span class="text-secondary">Bắt đầu:</span>
                                                    <span class="fw-bold">@course.NgayBatDau?.ToString("dd/MM/yyyy")</span>
                                                </div>

                                                <!-- Số lượng còn lại -->
                                                <div class="mb-2">
                                                    <span class="text-secondary">Còn lại:</span>
                                                    <span class="fw-bold">@soLuongConLai học viên</span>
                                                </div>

                                                <!-- Học phí -->
                                                <div class="mb-3">
                                                    <span class="text-secondary">Học phí:</span>
                                                    <span class="fw-bold text-primary">
                                                        @(hocPhi.HasValue ? $"{hocPhi.Value:N0} VNĐ" : "Liên hệ")
                                                    </span>
                                                </div>

                                                <!-- Trạng thái -->
                                                <p class="text-primary fw-bold mb-0">
                                                    @(course.IsActive == true ? "Đang mở" : "Đã khóa")
                                                </p>

                                            </div>

                                            <!-- Nút -->
                                            <div class="card-footer bg-transparent border-0 p-2">
                                                <div class="d-flex gap-2">

                                                    <!-- Chi tiết -->
                                                    <a asp-controller="KhoaHocs"
                                                       asp-action="Details"
                                                       asp-route-id="@course.KhoaHocId"
                                                       class="btn btn-outline-primary btn-sm w-50">
                                                        Chi tiết
                                                    </a>

                                                    <!-- Đăng ký -->
                                                    <button class="btn btn-primary btn-sm w-50"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#registerModal-@course.KhoaHocId">
                                                        Đăng ký
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal Đăng ký -->
                                    <div class="modal fade" id="registerModal-@course.KhoaHocId">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Đăng ký khóa học</h5>
                                                    <button class="btn-close" data-bs-dismiss="modal"></button>
                                                </div>
                                                <div class="modal-body">

                                        @if (roleId != 1)
                                                    {
                                                        <div class="alert alert-danger">
                                                            Chỉ học viên mới có thể đăng ký.
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <div class="text-center">
                                                            <p>Bạn muốn đăng ký khóa: <b>@course.TenKhoaHoc</b>?</p>
                                                            <a asp-controller="KhoaHocs"
                                                               asp-action="Register"
                                                               asp-route-id="@course.KhoaHocId"
                                                               class="btn btn-primary">
                                                                Xác nhận
                                                            </a>
                                                        </div>
                                                    }

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>

                        slideIndex++;
                    }

                </div>

                <!-- Nút trái/phải -->
                <button class="carousel-control-prev course-nav-rect" type="button"
                        data-bs-target="#courseCarousel" data-bs-slide="prev">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <button class="carousel-control-next course-nav-rect" type="button"
                        data-bs-target="#courseCarousel" data-bs-slide="next">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        }
        else
        {
            <div class="text-center text-muted">
                Hiện tại chưa có thông tin khóa học.
            </div>
        }

        <div class="text-center mt-5">
            <a href="/KhoaHocs" class="btn btn-primary btn-lg">
                <i class="fas fa-list me-2"></i> Xem Tất Cả Khóa Học
            </a>
        </div>
    </div>
</section>

<!-- ========================== -->
<!-- THỐNG KÊ NHANH -->
<!-- ========================== -->
<section class="py-5 stats-section">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-md-3">
                <h2 class="fw-bold display-5 text-primary">98%</h2>
                <p class="text-muted mb-0">Tỷ lệ học viên đậu ngay lần thi đầu tiên*</p>
            </div>
            <div class="col-md-3">
                <h2 class="fw-bold display-5 text-success">10K+</h2>
                <p class="text-muted mb-0">Học viên đã tin tưởng & đăng ký</p>
            </div>
            <div class="col-md-3">
                <h2 class="fw-bold display-5 text-warning">30+</h2>
                <p class="text-muted mb-0">Giảng viên, trợ giảng chuyên môn cao</p>
            </div>
            <div class="col-md-3">
                <h2 class="fw-bold display-5 text-danger">15+</h2>
                <p class="text-muted mb-0">Năm kinh nghiệm trong đào tạo GPLX</p>
            </div>
        </div>
    </div>
</section>

<!-- ========================== -->
<!-- GIẢNG VIÊN -->
<!-- ========================== -->
<section class="instructors-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold display-5">Đội Ngũ Giảng Viên</h2>
            <p class="text-muted lead">Gặp gỡ những người sẽ đồng hành và truyền kinh nghiệm thực tế cho bạn.</p>
        </div>

        @{
            var instructorGroups = Model.Instructors
            .Chunk(4)
            .ToList();
            int slide = 0;
        }

        <div id="instructorCarousel" class="carousel slide">
            <div class="carousel-inner">

                @foreach (var group in instructorGroups)
                {
                    <div class="carousel-item @(slide == 0 ? "active" : "")">
                        <div class="row g-4 justify-content-center">

                            @foreach (var instructor in group)
                            {
                                string avatar = instructor.User.Avatar ?? "";
                                avatar = avatar.Replace("wwwroot/", "").TrimStart('/');
                                string avatarPath = Url.Content("~/" + avatar);

                                <div class="col-12 col-sm-6 col-lg-3 d-flex">
                                    <div class="card h-100 shadow border-0 text-center instructor-card flex-fill">

                                        <!-- Avatar -->
                                        <img src="@avatarPath"
                                             onerror="this.src='/images/avatar/default.png'"
                                             class="card-img-top rounded-circle mx-auto mt-4"
                                             style="width:150px;height:150px;object-fit:cover;"
                                             alt="@instructor.User.TenDayDu">

                                        <div class="card-body">
                                            <h5 class="card-title fw-bold">@instructor.User.TenDayDu</h5>

                                            <p class="text-muted mb-1">
                                                @(string.IsNullOrEmpty(instructor.ChuyenMon) ?
                                                                                        "Chưa cập nhật chuyên môn" : instructor.ChuyenMon)
                                                                                                                                      </p>

                                            <p class="text-primary mb-1">
                                                Hạng đào tạo: @instructor.ChuyenDaoTao
                                            </p>

                                            <p class="text-muted small">
                                                Kinh nghiệm:
                                                @(instructor.NgayBatDauLam.HasValue
                                                                                        ? (DateTime.Today.Year - instructor.NgayBatDauLam.Value.Year) + " năm"
                                                                                        : "N/A")
                                    </p>
                                </div>

                                        <div class="card-footer bg-transparent border-0 pb-3">
                                            <a href="/GiaoViens/Details/@instructor.TtGiaoVienId"
                                               class="btn btn-outline-primary btn-sm">
                                                <i class="fas fa-user me-2"></i> Xem Hồ Sơ
                                            </a>
                                        </div>

                                    </div>
                                </div>
                                                }

                        </div>
                    </div>

                    slide++;
                }
            </div>

            <!-- Nút trái/phải -->
            <button class="carousel-control-prev instructor-nav" type="button"
                    data-bs-target="#instructorCarousel" data-bs-slide="prev">
                <i class="fas fa-chevron-left"></i>
            </button>

            <button class="carousel-control-next instructor-nav" type="button"
                    data-bs-target="#instructorCarousel" data-bs-slide="next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

    </div>
</section>

<!-- ========================== -->
<!-- PHẢN HỒI HỌC VIÊN -->
<!-- ========================== -->
<section class="testimonials-section py-5 bg-light">
    <div class="container">

        <div class="text-center mb-5">
            <h2 class="fw-bold display-5">Ý Kiến Học Viên</h2>
            <p class="text-muted lead">Cảm nhận thực tế từ những học viên đã hoàn thành khóa học.</p>
        </div>

        @{
            var testimonials = Model.Testimonials
            .Where(t => t.SoSao >= 3.5m)
            .OrderByDescending(t => t.ThoiGianPh)
            .ToList();

            var tGroups = testimonials.Chunk(3).ToList();
            int tSlide = 0;
        }

        @if (testimonials.Any())
        {
            <div id="testimonialCarousel" class="carousel slide" data-bs-interval="5000" data-bs-ride="carousel">
                <div class="carousel-inner">

                    @foreach (var group in tGroups)
                    {
                        <div class="carousel-item @(tSlide == 0 ? "active" : "")">
                            <div class="row g-4 justify-content-center">

                                @foreach (var t in group)
                                {
                                    int stars = (int)Math.Round(t.SoSao);

                                    <div class="col-12 col-md-4 d-flex">
                                        <div class="card testimonial-card shadow-sm flex-fill">

                                            <div class="testimonial-icon">
                                                <i class="fas fa-quote-left"></i>
                                            </div>

                                            <div class="card-body text-center">

                                                <p class="testimonial-text mb-3">
                                                    "@t.NoiDung"
                                                </p>

                                                <h5 class="fw-bold mt-3">@t.User.TenDayDu</h5>

                                                <div class="text-warning mb-1">
                                                    @for (int i = 1; i <= 5; i++)
                                                    {
                                                        if (i <= stars)
                                                        {
                                                            <i class="fas fa-star"></i>
                                                        }
                                                        else
                                                        {
                                                            <i class="far fa-star"></i>
                                                        }
                                                    }
                                                    <span class="text-muted small ms-1">(@t.SoSao.ToString("0.0"))</span>
                                                </div>

                                                <p class="text-muted small mb-0">
                                                    @t.ThoiGianPh.ToString("dd/MM/yyyy HH:mm")
                                                </p>

                                            </div>

                                        </div>
                                    </div>
                                }

                            </div>
                        </div>

                        tSlide++;
                    }

                </div>

                <!-- Nút trái/phải -->
                <button class="carousel-control-prev testimonial-nav" type="button"
                        data-bs-target="#testimonialCarousel" data-bs-slide="prev">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <button class="carousel-control-next testimonial-nav" type="button"
                        data-bs-target="#testimonialCarousel" data-bs-slide="next">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        }
        else
        {
            <div class="text-center text-muted">
                Hiện tại chưa có phản hồi nổi bật.
            </div>
        }

    </div>
</section>

<!-- ========================== -->
<!-- CTA -->
<!-- ========================== -->
<section class="cta-section py-5 text-white text-center">
    <div class="container">
        <h2 class="fw-bold display-5 mb-4">Sẵn Sàng Chinh Phục Đường Lộ?</h2>
        <p class="lead mb-4">
            Đăng ký ngay hôm nay để nhận tư vấn miễn phí, lịch học phù hợp và nhiều ưu đãi hấp dẫn.
        </p>
        <a href="/Account/Register" class="btn btn-primary btn-lg">
            <i class="fas fa-user-plus me-2"></i> Bắt Đầu Ngay
        </a>
    </div>
</section>

<!-- Back to Top Button -->
<button id="backToTop" class="btn btn-primary back-to-top" title="Quay lại đầu trang">
    <i class="fas fa-arrow-up"></i>
</button>

<style>
    .hero-section {
        position: relative;
        height: 100vh;
        overflow: hidden;
    }

        .hero-section .carousel,
        .hero-section .carousel-inner,
        .hero-section .carousel-item,
        .hero-section .hero-bg {
            height: 100%;
        }

        .hero-section .hero-bg {
            width: 100%;
            height: 100%;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-color: #ccc !important;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .hero-section .carousel-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.35);
            z-index: 2;
        }

    .hero-overlay-content {
        z-index: 10;
    }

    .hero-section .carousel-control-prev,
    .hero-section .carousel-control-next {
        width: 5%;
        z-index: 15;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 5px;
        height: 60px;
        top: 50%;
        transform: translateY(-50%);
        opacity: 1;
        transition: opacity 0.3s ease, background 0.3s ease;
    }

        .hero-section .carousel-control-prev:hover,
        .hero-section .carousel-control-next:hover {
            background: rgba(0, 0, 0, 0.7);
        }

    .hero-section .carousel-control-prev-icon,
    .hero-section .carousel-control-next-icon {
        background-image: none;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 2rem;
    }

        .hero-section .carousel-control-prev-icon::before,
        .hero-section .carousel-control-next-icon::before {
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
        }

        .hero-section .carousel-control-prev-icon::before {
            content: "\f053";
        }

        .hero-section .carousel-control-next-icon::before {
            content: "\f054";
        }

    @@media (max-width: 768px) {
        .hero-section h1 {
            font-size: 2.2rem;
        }

        .hero-section .btn {
            width: 100%;
            padding: 10px 20px;
            font-size: 1rem;
        }

        .hero-section .carousel-control-prev,
        .hero-section .carousel-control-next {
            width: 10%;
            height: 50px;
        }
    }

    .hero-section .btn-learn-more {
        background-color: #ffc107;
        color: #000;
        border: none;
        padding: 12px 30px;
        font-weight: bold;
        text-transform: uppercase;
        transition: background-color 0.3s ease;
    }

        .hero-section .btn-learn-more:hover {
            background-color: #e0a800;
            color: #000;
        }

    .hero-section .btn-our-courses {
        background-color: #fff;
        color: #000;
        border: none;
        padding: 12px 30px;
        font-weight: bold;
        text-transform: uppercase;
        transition: background-color 0.3s ease;
    }

        .hero-section .btn-our-courses:hover {
            background-color: #f0f0f0;
            color: #000;
        }

    .courses-section .card,
    .instructors-section .card {
        transition: transform 0.3s, box-shadow 0.3s;
    }

        .courses-section .card:hover,
        .instructors-section .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2) !important;
        }

    .instructors-section .card-img-top {
        transition: transform 0.3s;
    }

    .instructors-section .card:hover .card-img-top {
        transform: scale(1.08);
    }

    .testimonials-section .card {
        background: #fff;
    }

    .dark-mode .testimonials-section .card {
        background: #333;
    }

    .cta-section {
        background: linear-gradient(rgba(0, 123, 255, 0.9), rgba(0, 123, 255, 0.9)), url('@Url.Content("~/images/slides/s2.jpg")');
        background-size: cover;
        background-position: center;
        padding: 80px 0;
        min-height: 350px;
    }

    .stats-section {
        background-color: #f8f9fa;
    }

    /* Back to Top */
    .back-to-top {
        position: fixed;
        bottom: 90px;
        right: 30px;
        z-index: 1000;
        width: 58px;
        height: 58px;
        border-radius: 50%;
        display: none;
        align-items: center;
        justify-content: center;
        transition: opacity 0.3s ease, background-color 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

        .back-to-top.show {
            display: flex;
            opacity: 1;
        }

        .back-to-top:hover {
            background-color: #0056b3;
        }

        .back-to-top i {
            font-size: 1.5rem;
        }

    .dark-mode .back-to-top {
        background-color: #1a73e8;
    }

        .dark-mode .back-to-top:hover {
            background-color: #1557b0;
        }

    .course-card {
        border-radius: 14px;
        transition: all 0.25s ease-in-out;
        padding: 6px;
    }

        .course-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 22px rgba(0, 0, 0, 0.15);
        }

        .course-card .card-body {
            padding: 22px;
            min-height: 255px;
        }

        .course-card .card-footer {
            background: transparent;
            padding: 18px;
        }

    .course-card-mini {
        border-radius: 14px;
        transition: all 0.25s ease;
        min-height: 260px;
    }

        .course-card-mini:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

    .course-nav {
        width: 55px;
        height: 55px;
        border-radius: 50%;
        background: #0d6efd;
        color: white;
        top: 50%;
        transform: translateY(-50%);
        opacity: 0.9;
        border: none;
    }

        .course-nav:hover {
            opacity: 1;
            background: #0b5ed7;
        }

        .course-nav i {
            font-size: 24px;
        }

    .course-card-big {
        border-radius: 16px;
        min-height: 420px;
        transition: all .25s ease;
        background: #fff;
    }

        .course-card-big:hover {
            transform: translateY(-6px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

    .course-thumbnail {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 10px;
    }

    #courseCarousel {
        position: relative;
    }

    .course-nav-rect {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 48px;
        height: 80px;
        /* màu rất nhạt, mờ ảo */
        background: rgba(0, 0, 0, 0.04);
        color: #6c757d;
        /* không bo góc */
        border-radius: 0;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0.4;
        transition: background 0.25s ease, opacity 0.25s ease;
        box-shadow: none;
    }

    .carousel-control-prev.course-nav-rect {
        left: -60px;
    }

    .carousel-control-next.course-nav-rect {
        right: -60px;
    }

        .course-nav-rect i {
            font-size: 24px;
        }

        .course-nav-rect:hover {
            background: rgba(0, 0, 0, 0.08);
            opacity: 0.8;
        }

    .instructor-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 48px;
        height: 80px;
        background: rgba(0, 0, 0, 0.05);
        color: #6c757d;
        border: none;
        border-radius: 0;
        opacity: 0.4;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.25s;
    }

    .carousel-control-prev.instructor-nav {
        left: -60px;
    }

    .carousel-control-next.instructor-nav {
        right: -60px;
    }

    .instructor-nav:hover {
        opacity: 1;
        background: rgba(0, 0, 0, 0.12);
    }

    .instructor-nav i {
        font-size: 26px;
    }
    /* CARD ĐẸP HƠN */
    .testimonial-card {
        position: relative;
        border-radius: 18px;
        background: #fff;
        padding: 20px 25px;
        border: none;
        transition: 0.3s ease;
    }

        .testimonial-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

    /* QUOTE ICON */
    .testimonial-icon {
        width: 48px;
        height: 48px;
        background: #0d6efd;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: -30px auto 10px;
        font-size: 20px;
        box-shadow: 0 4px 12px rgba(13,110,253,0.3);
    }

    .testimonial-text {
        font-size: 1rem;
        color: #444;
        font-style: italic;
        min-height: 90px;
    }

    /* NÚT TRÁI/PHẢI */
    .testimonial-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 48px;
        height: 80px;
        background: rgba(0, 0, 0, 0.05);
        color: #6c757d;
        border: none;
        border-radius: 0;
        opacity: 0.4;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.25s;
    }

    .carousel-control-prev.testimonial-nav {
        left: -60px;
    }

    .carousel-control-next.testimonial-nav {
        right: -60px;
    }

    .testimonial-nav:hover {
        opacity: 1;
        background: rgba(0, 0, 0, 0.12);
    }

    .testimonial-nav i {
        font-size: 26px;
    }
    /* Container phải relative để nút bám theo */
    #testimonialCarousel {
        position: relative;
    }
</style>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var backToTop = document.getElementById("backToTop");

            window.addEventListener("scroll", function () {
                if (window.scrollY > 300) {
                    backToTop.classList.add("show");
                } else {
                    backToTop.classList.remove("show");
                }
            });

            backToTop.addEventListener("click", function () {
                window.scrollTo({ top: 0, behavior: "smooth" });
            });
        });
    </script>
}
