@model dacn_dtgplx.Models.HoaDonThanhToan

@{
    var dk = Model.IdDangKyNavigation;
    var kh = dk.KhoaHoc;
    var user = dk.HoSo.User;
}

<div class="container mt-4" style="max-width: 750px;">
    <div class="card shadow-lg border-0 rounded-4 p-4">

        <h3 class="fw-bold text-primary mb-3">
            💳 Thanh toán hóa đơn #@Model.IdThanhToan
        </h3>

        <!-- THÔNG TIN KHÓA HỌC -->
        <div class="p-3 mb-3 rounded-3" style="background: #f7faff;">
            <h5 class="fw-bold text-dark">📘 Thông tin khóa học</h5>
            <hr />
            <p><strong>Khóa học:</strong> @kh.TenKhoaHoc</p>
            <p><strong>Hạng GPLX:</strong> @kh.IdHangNavigation.MaHang</p>
            <p><strong>Học viên:</strong> @user.TenDayDu</p>
            <p class="text-danger fw-bold">
                <strong>Số tiền cần thanh toán:</strong> @Model.SoTien?.ToString("N0") VNĐ
            </p>
        </div>

        <!-- FORM THANH TOÁN -->
        <form method="post" asp-action="ChoosePaymentMethod" asp-controller="Payment">
            @Html.AntiForgeryToken()
            <input type="hidden" name="hoaDonId" value="@Model.IdThanhToan" />

            <h5 class="fw-bold mb-2">📝 Nội dung chuyển khoản</h5>
            <textarea name="noiDung" class="form-control p-3 rounded-3 mb-4" rows="3">@($"{user.TenDayDu} - Thanh toán khóa học {kh.TenKhoaHoc}")
            </textarea>

            <h5 class="fw-bold mb-2">💰 Chọn phương thức thanh toán</h5>

            <!-- VNPAY -->
            <label class="payment-option shadow-sm">
                <input type="radio" name="method" value="VNPAY" checked />
                <img src="https://sandbox.vnpayment.vn/paymentv2/images/logo.png" width="140" />
                <span class="fw-semibold text-dark">Thanh toán qua VNPAY</span>
            </label>

            <!-- PAYPAL (Hiện UI nhưng chưa dùng) -->
            <label class="payment-option shadow-sm">
                <input type="radio" disabled />
                <img src="https://www.paypalobjects.com/webstatic/icon/pp258.png" width="55" />
                <span class="text-muted">PayPal (chưa hỗ trợ)</span>
            </label>

            <button type="submit" class="btn btn-primary w-100 py-3 fw-bold rounded-3 mt-3">
                🚀 Tiến hành thanh toán
            </button>
        </form>

    </div>
</div>

<style>
    .payment-option {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        border: 1px solid #e0e6f1;
        border-radius: 10px;
        cursor: pointer;
        margin-bottom: 12px;
        transition: .2s;
        background: #fff;
    }

        .payment-option:hover {
            border-color: #0d6efd;
            background: #f0f7ff;
        }

        .payment-option input {
            transform: scale(1.3);
        }
</style>
